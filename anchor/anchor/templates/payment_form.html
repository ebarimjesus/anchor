{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>AFRO Token ICO</title>
    <!-- Include Paystack's JavaScript library -->
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 20; /* Remove margin to ensure full page coverage */
        }
    
        h1 {
            color: #086423;
            text-align: center;
            padding: 20px 0;
        }
    
        .container {
            max-width: 600px;
            background-color: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center; /* Center text within the container */
        }
    
        p {
            color: #666;
        }
    
        label {
            font-weight: bold;
        }
    
        input[type="number"],
        input[type="email"],
        input[type="text"] {
            width: 70%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
    
        button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 3px;
            cursor: pointer;
        }
    
        button:hover {
            background-color: #0056b3;
        }
    
        #total-cost {
            border-top: 1px solid #ccc;
            margin-top: 20px;
            padding-top: 10px;
        }

        /* Mobile-friendly styles */
        @media screen and (max-width: 480px) {
            .container {
                max-width: 100%;
            }
        }
    </style>    
</head>
<body>
    <div class="container">
        <h1>AFRO Token Initial Coin Offering (ICO)</h1>
        <p>Welcome to the AFRO Token ICO! Get your AFRO tokens now.</p>

        <div id="token-price">
            <p>1 AFRO Token = $<span id="afro-to-usdc">0.50</span> USD</p>
        </div>

        <div id="token-amount">
            <label for="amount">Enter the number of AFRO tokens you want to purchase:</label>
            <input type="number" id="amount" min="1" step="1" placeholder="Enter the amount">
            <button id="calculate-button">Calculate Total</button>
        </div>

        <div id="total-cost">
            <p>Total Cost: $<span id="total-amount">0.50</span> USD</p>
            <p>Total Cost in NGN: â‚¦<span id="total-amount-ngn">0.00</span> NGN</p>
        </div>

        <div>
            <label for="email-address">Enter your email address:</label>
            <input type="email" id="email-address" placeholder="Your email address">
        </div>

        <div id="user-info">
            <label for="user-address">Enter your Stellar public key or federation address:</label>
            <input type="text" id="user-address" placeholder="Stellar public key or federation address">
        </div>

        <div id="payment-options">
            <p>Select your payment method:</p>
            <!-- Use Paystack's payment form -->
            <button id="paystack-button">Pay with Paystack</button>
        </div>

        <div id="transaction-status">
            <!-- Transaction status will be displayed here -->
        </div>
    </div>

    <script>
        // Function to calculate the total cost based on the number of tokens entered
        function calculateTotal() {
            const amount = parseFloat(document.getElementById("amount").value);
            const afroToUsd = parseFloat(document.getElementById("afro-to-usdc").textContent);
            const totalAmount = amount * afroToUsd;
            document.getElementById("total-amount").textContent = totalAmount.toFixed(2);

            // Calculate the total cost in NGN based on the calculated total amount in USD
            const ngnRate = 500; // Replace with your NGN to USD exchange rate
            const totalAmountNGN = totalAmount * ngnRate;
            document.getElementById("total-amount-ngn").textContent = totalAmountNGN.toFixed(2);
        }

        // Add an event listener to the "Calculate Total" button
        document.getElementById("calculate-button").addEventListener("click", calculateTotal);

        // Function to initialize the Paystack payment
        function initializePayment() {
            const amountNGN = parseFloat(document.getElementById("total-amount-ngn").textContent) * 100; // Convert to kobo (Paystack's currency unit)
            const email = document.getElementById('email-address').value;
            const publicKey = "pk_live_081c6cf541c64f08115d6285e4b0b5d69953e651"; // Replace with your Paystack public key
            const reference = "AFROICO_" + Date.now(); // Generate a unique reference

            // Create the Paystack handler
            var handler = PaystackPop.setup({
                key: publicKey,
                email: email,
                amount: amountNGN,
                currency: "NGN", // Use the appropriate currency code
                ref: reference,
                callback: function (response) {
                    // Handle successful payment here
                    document.getElementById("transaction-status").innerHTML = "<p>Payment successful! You will receive your AFRO tokens shortly.</p>";
                },
                onClose: function () {
                    // Handle payment cancellation or failure
                    document.getElementById("transaction-status").innerHTML = "<p>Payment canceled or failed. Please try again.</p>";
                }
            });

            // Open the Paystack payment modal
            handler.openIframe();
        }

        // Add an event listener to the "Pay with Paystack" button
        document.getElementById("paystack-button").addEventListener("click", initializePayment);
    </script>
</body>
</html>


